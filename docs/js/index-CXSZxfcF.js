import{F as m,r as k,c as R,_ as $}from"./common-wGBM91_D.js";import{i as h,q as v,s as g,x as M,d as I,o as y,a as w,k as p,u as c,I as U,b as d,t as f,e as b,y as z}from"./vendor-CnjT8O4b.js";import{_ as x}from"./index-DFn7Gc9O.js";const l={getId(){return m.getId()},chooser(){return m.chooser("image/*")},getDpi(a){return new Promise(t=>{const o=new Image;o.onload=()=>t({width:o.width,height:o.height}),o.src=a})}};function D(){const a=h([]),t=h([]);return{items:a,selected:t,onAddItem:async()=>{const n=await l.chooser(),i=async e=>({id:l.getId(),url:URL.createObjectURL(e),name:e.name,size:m.formatSize(e.size),type:e.type.split("/")[1],dpi:await l.getDpi(URL.createObjectURL(e)),file:e,lastModified:M(e.lastModified).format("YYYY-MM-DD HH:mm:ss")}),r=n.map(e=>i(e)),s=await Promise.all(r);a.value.push(...s),v.success(`成功导入 ${s.length} 张图片`)},onRemoveItems:async n=>{const i=a.value.filter(({id:e})=>n.includes(e)).map(({name:e})=>e);if(!await k(i))return;const s=g(a.value,({id:e})=>n.includes(e));g(t.value,e=>n.includes(e)),v.success(`成功移除 ${s.length} 张图片`)},onConvertItems:async()=>{await R("image",a.value)}}}const L={class:"image-info"},A={class:"info-base"},B={class:"info-name"},Y={class:"info-size"},j=I({__name:"profile",props:{data:{}},setup(a){return(t,o)=>(y(),w("div",L,[p(c(U),{src:t.data.url,width:50,height:34,fit:"cover"},null,8,["src"]),d("div",A,[d("div",B,f(t.data.name),1),d("div",Y,f(t.data.size),1)])]))}}),P=x(j,[["__scopeId","data-v-d08ce036"]]),S={class:"page"},F=I({__name:"index",setup(a){const{selected:t,items:o,onAddItem:u,onRemoveItems:_,onConvertItems:n}=D(),i=b(()=>[{text:"导入图片",type:"primary",onClick:()=>u()},{text:"批量删除",type:"primary",onClick:()=>_(t.value)},{text:"开始转化",type:"primary",onClick:()=>n()}]),r=[{title:"基础信息",dataIndex:"name",width:400,render:({record:s})=>p(P,{data:s},null)},{title:"图片分辨率",dataIndex:"dpi",align:"center",render:({record:s})=>`${s.dpi.width} * ${s.dpi.height}`},{title:"图片类型",dataIndex:"type",align:"center"},{title:"最后编辑时间",dataIndex:"lastModified",align:"center"}];return(s,e)=>(y(),w("div",S,[p(c($),{selected:c(t),"onUpdate:selected":e[0]||(e[0]=C=>z(t)?t.value=C:null),options:{rowSelection:{type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}},data:c(o),operates:i.value,columns:r},null,8,["selected","data","operates"])]))}}),V=x(F,[["__scopeId","data-v-d21dd48e"]]);export{V as default};
