import{F as x,r as C,c as M,_ as R}from"./common-BCO8idLC.js";import{V as u,c as V}from"./video-Dhiljnqq.js";import{d as k}from"./dayjs-BZIFujmo.js";import{b as v}from"./@arco-design-B-Y6FmNc.js";import{r as f}from"./lodash-es-B16_zbcl.js";import{r as _,e as I,h as y,j as w,m as l,N as h,c as B,v as g,Z as p,V as D}from"./@vue-CAcTSrwG.js";import"./gifshot-hWNyc3AU.js";import{_ as b}from"./index-BoOTtc93.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./b-validate-CWN02ujJ.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./number-precision-BW_FzNZC.js";import"./vue-router-DKDYNLRD.js";/* empty css                    */function $(){const o=_([]),a=_([]);return{items:o,selected:a,onAddItem:async()=>{const s=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),i=[],r=new MediaRecorder(s,{mimeType:"video/mp4"});r.ondataavailable=e=>{i.push(e.data)},r.start(100),r.onstop=async()=>{const e=new Blob(i),t=URL.createObjectURL(e),d=await u.getVideoObject(t);o.value.push({id:u.getId(),url:t,name:"录像"+new Date().getTime(),size:x.formatSize(e.size),type:"mp4",dpi:{width:d.videoWidth,height:d.videoHeight},file:e,duration:parseInt(d.duration*10+"")/10,lastModified:k().format("YYYY-MM-DD HH:mm:ss")}),v.success("录像导入成功")}},onRemoveItems:async s=>{const i=o.value.filter(({id:t})=>s.includes(t)).map(({name:t})=>t);if(!await C(i))return;const e=f(o.value,({id:t})=>s.includes(t));f(a.value,t=>s.includes(t)),v.success(`成功移除 ${e.length} 个视频`)},onConvertItems:async()=>{const s=o.value.filter(({id:i})=>a.value.includes(i));await M("video",s)}}}const z={class:"image-info"},U=["src"],j={class:"info-base"},S={class:"info-name"},Y={class:"info-size"},A=I({__name:"profile",props:{data:{}},setup(o){const a=o,c=()=>{V(a.data.url)};return(n,m)=>(y(),w("div",z,[l("video",{fit:"cover",src:n.data.url,width:50,height:34,onClick:c},null,8,U),l("div",j,[l("div",S,h(n.data.name),1),l("div",Y,h(n.data.size),1)])]))}}),H=b(A,[["__scopeId","data-v-5cb7ca1d"]]),N={class:"page"},P=I({__name:"index",setup(o){const{selected:a,items:c,onAddItem:n,onRemoveItems:m,onConvertItems:s}=$(),i=B(()=>[{text:"屏幕录制",type:"primary",onClick:()=>n()},{text:"批量删除",type:"primary",disabled:a.value.length<=0,onClick:()=>m(a.value)},{text:"转化选择项",type:"primary",disabled:a.value.length<=0,onClick:()=>s()}]),r=[{title:"基础信息",dataIndex:"name",width:400,render:({record:e})=>g(H,{data:e},null)},{title:"视频分辨率",dataIndex:"dpi",align:"center",render:({record:e})=>`${e.dpi.width} * ${e.dpi.height}`},{title:"视频时长(秒)",dataIndex:"duration",align:"center"},{title:"视频类型",dataIndex:"type",align:"center"},{title:"最后编辑时间",dataIndex:"lastModified",align:"center"}];return(e,t)=>(y(),w("div",N,[g(p(R),{selected:p(a),"onUpdate:selected":t[0]||(t[0]=d=>D(a)?a.value=d:null),options:{rowSelection:{type:"radio"}},data:p(c),operates:i.value,columns:r},null,8,["selected","data","operates"])]))}}),ae=b(P,[["__scopeId","data-v-afe605f7"]]);export{ae as default};
