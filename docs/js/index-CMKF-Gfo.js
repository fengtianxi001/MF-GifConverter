import{F as x,r as C,c as M,_ as R}from"./common-BkWiHJ6U.js";import{V as u,c as k}from"./video-C6uv_EWa.js";import{d as $}from"./dayjs-qC8cuZUE.js";import{b as v}from"./@arco-design-BGb1B8nU.js";import{r as f}from"./lodash-es-B16_zbcl.js";import{r as _,e as I,k as y,p as w,n as l,z as h,c as z,v as g,$ as p,Y as B}from"./@vue-Bl_1ggUi.js";import"./gifshot-9uRgnMzp.js";import{_ as b}from"./index-CDzCvF7C.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./b-tween-BtQQsX34.js";import"./number-precision-BW_FzNZC.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./b-validate-CWN02ujJ.js";import"./vue-router-BkE0ne8q.js";/* empty css                    */function D(){const s=_([]),a=_([]);return{items:s,selected:a,onAddItem:async()=>{const o=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1}),i=[],r=new MediaRecorder(o,{mimeType:"video/mp4"});r.ondataavailable=e=>{i.push(e.data)},r.start(100),r.onstop=async()=>{const e=new Blob(i),t=URL.createObjectURL(e),d=await u.getVideoObject(t);s.value.push({id:u.getId(),url:t,name:"录像"+new Date().getTime(),size:x.formatSize(e.size),type:"mp4",dpi:{width:d.videoWidth,height:d.videoHeight},file:e,duration:parseInt(d.duration*10+"")/10,lastModified:$().format("YYYY-MM-DD HH:mm:ss")}),v.success("录像导入成功")}},onRemoveItems:async o=>{const i=s.value.filter(({id:t})=>o.includes(t)).map(({name:t})=>t);if(!await C(i))return;const e=f(s.value,({id:t})=>o.includes(t));f(a.value,t=>o.includes(t)),v.success(`成功移除 ${e.length} 个视频`)},onConvertItems:async()=>{const o=s.value.filter(({id:i})=>a.value.includes(i));await M("video",o)}}}const V={class:"image-info"},U=["src"],Y={class:"info-base"},S={class:"info-name"},j={class:"info-size"},A=I({__name:"profile",props:{data:{}},setup(s){const a=s,c=()=>{k(a.data.url)};return(n,m)=>(y(),w("div",V,[l("video",{fit:"cover",src:n.data.url,width:50,height:34,onClick:c},null,8,U),l("div",Y,[l("div",S,h(n.data.name),1),l("div",j,h(n.data.size),1)])]))}}),H=b(A,[["__scopeId","data-v-5cb7ca1d"]]),P={class:"page"},F=I({__name:"index",setup(s){const{selected:a,items:c,onAddItem:n,onRemoveItems:m,onConvertItems:o}=D(),i=z(()=>[{text:"屏幕录制",type:"primary",onClick:()=>n()},{text:"批量删除",type:"primary",disabled:a.value.length<=0,onClick:()=>m(a.value)},{text:"转化选择项",type:"primary",disabled:a.value.length<=0,onClick:()=>o()}]),r=[{title:"基础信息",dataIndex:"name",width:400,render:({record:e})=>g(H,{data:e},null)},{title:"视频分辨率",dataIndex:"dpi",align:"center",render:({record:e})=>`${e.dpi.width} * ${e.dpi.height}`},{title:"视频时长(秒)",dataIndex:"duration",align:"center"},{title:"视频类型",dataIndex:"type",align:"center"},{title:"最后编辑时间",dataIndex:"lastModified",align:"center"}];return(e,t)=>(y(),w("div",P,[g(p(R),{selected:p(a),"onUpdate:selected":t[0]||(t[0]=d=>B(a)?a.value=d:null),options:{rowSelection:{type:"radio"}},data:p(c),operates:i.value,columns:r},null,8,["selected","data","operates"])]))}}),oe=b(F,[["__scopeId","data-v-afe605f7"]]);export{oe as default};
