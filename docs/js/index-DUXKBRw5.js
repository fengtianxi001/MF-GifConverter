import{r as k,c as M,F as $,_ as V}from"./common-BkWiHJ6U.js";import{V as u,c as b}from"./video-C6uv_EWa.js";import{d as z}from"./dayjs-qC8cuZUE.js";import{b as f}from"./@arco-design-BGb1B8nU.js";import{r as _}from"./lodash-es-B16_zbcl.js";import{r as h,e as y,k as w,p as x,n as l,z as g,c as R,v as I,$ as v,Y as B}from"./@vue-Bl_1ggUi.js";import"./gifshot-9uRgnMzp.js";import{_ as C}from"./index-CDzCvF7C.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./b-tween-BtQQsX34.js";import"./number-precision-BW_FzNZC.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./b-validate-CWN02ujJ.js";import"./vue-router-BkE0ne8q.js";/* empty css                    */function U(){const a=h([]),t=h([]);return{items:a,selected:t,onAddItem:async()=>{const o=await u.chooser(),i=async e=>{const c=URL.createObjectURL(e),p=await u.getVideoObject(c);return{id:u.getId(),url:c,name:e.name,size:$.formatSize(e.size),type:e.type.split("/")[1],dpi:{width:p.videoWidth,height:p.videoHeight},file:e,duration:parseInt(p.duration*10+"")/10,lastModified:z(e.lastModified).format("YYYY-MM-DD HH:mm:ss")}},d=o.map(e=>i(e)),s=await Promise.all(d);a.value.push(...s),f.success(`成功导入 ${s.length} 个视频`)},onRemoveItems:async o=>{const i=a.value.filter(({id:e})=>o.includes(e)).map(({name:e})=>e);if(!await k(i))return;const s=_(a.value,({id:e})=>o.includes(e));_(t.value,e=>o.includes(e)),f.success(`成功移除 ${s.length} 个视频`)},onConvertItems:async()=>{const o=a.value.filter(({id:i})=>t.value.includes(i));await M("video",o)}}}const Y={class:"image-info"},P=["src"],j={class:"info-base"},A={class:"info-name"},D={class:"info-size"},H=y({__name:"profile",props:{data:{}},setup(a){const t=a,r=()=>{b(t.data.url)};return(n,m)=>(w(),x("div",Y,[l("video",{fit:"cover",src:n.data.url,width:50,height:34,onClick:r},null,8,P),l("div",j,[l("div",A,g(n.data.name),1),l("div",D,g(n.data.size),1)])]))}}),L=C(H,[["__scopeId","data-v-cfc8e0ef"]]),S={class:"page"},F=y({__name:"index",setup(a){const{selected:t,items:r,onAddItem:n,onRemoveItems:m,onConvertItems:o}=U(),i=R(()=>[{text:"导入视频",type:"primary",onClick:()=>n()},{text:"批量删除",type:"primary",disabled:t.value.length<=0,onClick:()=>m(t.value)},{text:"转化选择项",type:"primary",disabled:t.value.length<=0,onClick:()=>o()}]),d=[{title:"基础信息",dataIndex:"name",width:400,render:({record:s})=>I(L,{data:s},null)},{title:"视频分辨率",dataIndex:"dpi",align:"center",render:({record:s})=>`${s.dpi.width} * ${s.dpi.height}`},{title:"视频时长(秒)",dataIndex:"duration",align:"center"},{title:"视频类型",dataIndex:"type",align:"center"},{title:"最后编辑时间",dataIndex:"lastModified",align:"center"}];return(s,e)=>(w(),x("div",S,[I(v(V),{selected:v(t),"onUpdate:selected":e[0]||(e[0]=c=>B(t)?t.value=c:null),options:{rowSelection:{type:"radio"}},data:v(r),operates:i.value,columns:d},null,8,["selected","data","operates"])]))}}),ae=C(F,[["__scopeId","data-v-3862c879"]]);export{ae as default};
