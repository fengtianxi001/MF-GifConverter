import{F as l,r as k,c as R,_ as $}from"./common-BCO8idLC.js";import{d as M}from"./dayjs-BZIFujmo.js";import{b as h,I as U}from"./@arco-design-B-Y6FmNc.js";import{r as v}from"./lodash-es-B16_zbcl.js";import{r as f,e as I,h as y,j as w,v as p,Z as c,m as d,N as g,c as b,V as z}from"./@vue-CAcTSrwG.js";import"./gifshot-hWNyc3AU.js";import{_ as x}from"./index-BoOTtc93.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./b-validate-CWN02ujJ.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./number-precision-BW_FzNZC.js";import"./vue-router-DKDYNLRD.js";/* empty css                    */const m={getId(){return l.getId()},chooser(){return l.chooser("image/*")},getDpi(a){return new Promise(t=>{const o=new Image;o.onload=()=>t({width:o.width,height:o.height}),o.src=a})}};function D(){const a=f([]),t=f([]);return{items:a,selected:t,onAddItem:async()=>{const n=await m.chooser(),i=async e=>({id:m.getId(),url:URL.createObjectURL(e),name:e.name,size:l.formatSize(e.size),type:e.type.split("/")[1],dpi:await m.getDpi(URL.createObjectURL(e)),file:e,lastModified:M(e.lastModified).format("YYYY-MM-DD HH:mm:ss")}),r=n.map(e=>i(e)),s=await Promise.all(r);a.value.push(...s),h.success(`成功导入 ${s.length} 张图片`)},onRemoveItems:async n=>{const i=a.value.filter(({id:e})=>n.includes(e)).map(({name:e})=>e);if(!await k(i))return;const s=v(a.value,({id:e})=>n.includes(e));v(t.value,e=>n.includes(e)),h.success(`成功移除 ${s.length} 张图片`)},onConvertItems:async()=>{await R("image",a.value)}}}const L={class:"image-info"},j={class:"info-base"},A={class:"info-name"},B={class:"info-size"},Y=I({__name:"profile",props:{data:{}},setup(a){return(t,o)=>(y(),w("div",L,[p(c(U),{src:t.data.url,width:50,height:34,fit:"cover"},null,8,["src"]),d("div",j,[d("div",A,g(t.data.name),1),d("div",B,g(t.data.size),1)])]))}}),N=x(Y,[["__scopeId","data-v-d08ce036"]]),P={class:"page"},S=I({__name:"index",setup(a){const{selected:t,items:o,onAddItem:u,onRemoveItems:_,onConvertItems:n}=D(),i=b(()=>[{text:"导入图片",type:"primary",onClick:()=>u()},{text:"批量删除",type:"primary",onClick:()=>_(t.value)},{text:"开始转化",type:"primary",onClick:()=>n()}]),r=[{title:"基础信息",dataIndex:"name",width:400,render:({record:s})=>p(N,{data:s},null)},{title:"图片分辨率",dataIndex:"dpi",align:"center",render:({record:s})=>`${s.dpi.width} * ${s.dpi.height}`},{title:"图片类型",dataIndex:"type",align:"center"},{title:"最后编辑时间",dataIndex:"lastModified",align:"center"}];return(s,e)=>(y(),w("div",P,[p(c($),{selected:c(t),"onUpdate:selected":e[0]||(e[0]=C=>z(t)?t.value=C:null),options:{rowSelection:{type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}},data:c(o),operates:i.value,columns:r},null,8,["selected","data","operates"])]))}}),ee=x(S,[["__scopeId","data-v-d21dd48e"]]);export{ee as default};
